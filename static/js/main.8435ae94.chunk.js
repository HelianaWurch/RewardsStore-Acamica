(this["webpackJsonprewards-store"]=this["webpackJsonprewards-store"]||[]).push([[0],{19:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(20),r=c.n(s),i=(c(19),c(2)),l=c.p+"static/media/coin.1fc21bda.svg",o=c(10),j=c(0);var d=function(e){var t=e.closeModal,c=e.title,n=e.content;return Object(j.jsx)("div",{className:"modalBackground",children:Object(j.jsx)("div",{className:"modalContainer",children:Object(j.jsx)("div",{className:"modal-dialog",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsxs)("div",{className:"modal-header",children:[Object(j.jsx)("h5",{className:"modal-title",children:c}),Object(j.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return t(!1)},children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(j.jsx)("div",{children:n}),Object(j.jsx)("div",{className:"modal-footer",children:Object(j.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return t(!1)},children:"Close"})})]})})})})},b=c(8),u="https://coding-challenge-api.aerolab.co",O=new Headers;O.append("Authorization","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGZjYzFhZDY3Mjk2ZTAwMTk5NjQxNDciLCJpYXQiOjE2MjcxNzczODl9.sTKwPPE9L3wOLCj5iKqBePgLCSbtqhUcHP7JZNdN7h4"),O.append("Content-Type","application/json");var h=function(e,t){function c(c){!function(e,t,c){var n=JSON.stringify({amount:e}),a={method:"POST",headers:O,body:n,redirect:"follow"};fetch("".concat(u,"/user/points"),a).then((function(e){return e.json()})).then((function(e){var n=Object(b.a)({},t);n.points=e["New Points"],c(n),c(e)})).catch((function(e){return console.log(e)}))}(c,e,t)}return Object(j.jsxs)("div",{className:"modal-body d-flex justify-content-center",children:[Object(j.jsxs)("button",{type:"button",className:"btn btn-coins grl-font-style",onClick:function(){return c(1e3)},children:["1000",Object(j.jsx)("img",{className:"ml-2 mt-1",src:l,alt:"coin"})]}),Object(j.jsxs)("button",{type:"button",className:"btn btn-coins grl-font-style",onClick:function(){return c(5e3)},children:["5000 ",Object(j.jsx)("img",{className:"ml-2 mt-1",src:l,alt:"coin"})]}),Object(j.jsxs)("button",{type:"button",className:"btn btn-coins grl-font-style",onClick:function(){return c(7500)},children:["7500 ",Object(j.jsx)("img",{className:"ml-2 mt-1",src:l,alt:"coin"})]})]})},m=Object(n.createContext)();function x(e){var t=e.children,c=Object(n.useState)({name:"",points:0}),a=Object(i.a)(c,2),s=a[0],r=a[1],l=s.points;return Object(n.useEffect)((function(){!function(e){var t={method:"GET",headers:O,redirect:"follow"};fetch("".concat(u,"/user/me"),t).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){return console.log(e)}))}(r)}),[s]),Object(j.jsx)(m.Provider,{value:[s,r,l],children:t})}var f=function(){var e=Object(n.useContext)(m),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),r=Object(i.a)(s,2),b=r[0],u=r[1];return Object(j.jsxs)("div",{children:[b&&Object(j.jsx)(d,{title:"Buy More Coins...",closeModal:u,content:function(e,t){return Object(j.jsx)(h,{userInfo:e,setUserInfo:t})}(c,a)}),Object(j.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(j.jsx)("div",{className:"inline-block navbar-brand",children:Object(j.jsx)("div",{className:"container py-2",children:Object(j.jsxs)("span",{className:"d-flex",children:[Object(j.jsx)("h6",{className:"pt-2",children:c.name}),Object(j.jsxs)("span",{className:"badge badge-light ml-2 pl-3",children:[Object(j.jsxs)("button",{className:"btn-user-coins",onClick:function(){u(!0)},children:[c.points," "]}),Object(j.jsx)("img",{className:"ml-2",src:l,alt:"coin"})]})]})})}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNavAltMarkup",children:Object(j.jsxs)("div",{className:"navbar-nav nav-box",children:[Object(j.jsx)(o.b,{className:"grl-font-style nav-link-a",to:"/RewardsStore-Acamica/",children:"HOME"}),Object(j.jsx)(o.b,{className:"grl-font-style  nav-link-a",to:"/RewardsStore-Acamica/history",children:"HISTORY"}),Object(j.jsx)("button",{className:"grl-font-style  nav-link-a btn-buy-coins",onClick:function(){u(!0)},children:"BUY COINS"})]})})]})]})},v=c.p+"static/media/header-x1.b6f067c6.png";var p=function(){return Object(j.jsx)("header",{className:"d-flex justify-content-center ",children:Object(j.jsx)("div",{className:"carousel-inner",children:Object(j.jsxs)("div",{className:"carousel-item active",children:[Object(j.jsx)("img",{src:v,className:"d-block w-100",alt:"..."}),Object(j.jsx)("div",{className:"carousel-caption d-none d-md-block text-left",children:Object(j.jsx)("h1",{children:"REWARDS STORE"})})]})})})},N=c(22),g=c(14),y=Object(n.createContext)();function k(e){var t=e.children,c=Object(n.useState)({price:"all-products"}),a=Object(i.a)(c,2),s=a[0],r=a[1];return Object(j.jsx)(y.Provider,{value:[s,r],children:t})}var C=function(){var e=Object(n.useContext)(y),t=Object(i.a)(e,2),c=t[0],a=t[1];function s(e){var t=e.target,n=t.name,s=t.value,r=Object(b.a)(Object(b.a)({},c),{},Object(g.a)({},n,s));a(r)}return Object(j.jsx)("div",{className:"container-filters col-md-5 col-12 ",children:Object(j.jsxs)("ul",{className:"nav justify-content-center",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)("label",{className:"btn btn-secondary",children:[Object(j.jsx)("input",{className:"for-check-input mr-2",type:"radio",name:"price",id:"all-products",value:"all-products",onChange:s}),"All"]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)("label",{className:"btn btn-secondary",children:[Object(j.jsx)("input",{className:"for-check-input mr-2",type:"radio",name:"price",id:"lowest",value:"lowest",onChange:s}),"Lowest Price"]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)("label",{className:"btn btn-secondary",children:[Object(j.jsx)("input",{className:"for-check-input mr-2",type:"radio",name:"price",id:"highest",value:"highest",onChange:s}),"Highest Price"]})})]})})};var S=function(e){var t=e.redeemOk;return Object(j.jsx)("div",{className:"modal-body d-flex justify-content-center",children:!0===!t?Object(j.jsx)("h4",{children:"SUCCESS!"}):Object(j.jsx)("h4",{children:"Error! Something happened! Try Again!"})})},w=c.p+"static/media/buy-blue.13783e2a.svg",P=c.p+"static/media/buy-white.3eddcc1e.svg",M=function(e){var t=e.productInfo;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{href:t.imgUrl,className:"icon-container",children:Object(j.jsx)("img",{src:w,className:"card-img-top icon-bag",alt:"..."})}),Object(j.jsx)("div",{className:"card-img",children:Object(j.jsx)("img",{src:t.imgUrl,className:"card-img-top",alt:"..."})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("hr",{}),Object(j.jsx)("p",{className:"card-text card-category",children:t.category}),Object(j.jsx)("h5",{className:"card-title",children:t.name})]})]})},I=function(e){var t=e.productInfo,c=e.redeemProduct,n=e.setOpenModal,a=e.userCoins;return Object(j.jsx)("div",{className:"card-hover",id:"card-btn-container",children:a>=t.price?Object(j.jsxs)("div",{className:"card-body-hover",children:[Object(j.jsx)("div",{href:t.imgUrl,className:"icon-container",children:Object(j.jsx)("img",{src:P,className:"card-img-top icon-bag-hover",alt:"icon-bag"})}),Object(j.jsxs)("div",{className:"card-container",children:[Object(j.jsx)("div",{children:Object(j.jsx)("h2",{className:"card-text",children:t.price})}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{className:"ml-2 card-hover-coin",src:l,alt:"coins"})})]}),Object(j.jsx)("div",{className:"card-container",children:Object(j.jsx)("button",{className:"card-btn",type:"button",onClick:function(){c(t.id,t.price,a),n(!0)},children:"Redeem now"})})]}):Object(j.jsxs)("div",{className:"card-body-hover bg-dark",children:[Object(j.jsx)("div",{className:"card-container",children:Object(j.jsx)("div",{className:"card-btn text-center",children:"You need:"})}),Object(j.jsxs)("div",{className:"card-container",children:[Object(j.jsx)("div",{children:Object(j.jsx)("h2",{className:"card-text",children:Math.abs(a-t.price)})}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{className:"ml-2 card-hover-coin",src:l,alt:"coins"})})]})]})})};var E=function(e){var t=Object(n.useContext)(m),c=Object(i.a)(t,3),a=c[0],s=c[1],r=c[2],l=Object(n.useState)(!1),o=Object(i.a)(l,2),h=o[0],x=o[1],f=Object(n.useState)(!1),v=Object(i.a)(f,2),p=v[0],N=v[1],g=Object(n.useState)(!1),y=Object(i.a)(g,2),k=y[0],C=y[1],w={id:e.product._id,name:e.product.name,imgUrl:e.product.img.url,price:e.product.cost,category:e.product.category};return Object(j.jsxs)("div",{className:"card col-lg-3 col-md-5 col-12 m-2",onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)},children:[k&&Object(j.jsx)(d,{title:"Product",closeModal:C,content:Object(j.jsx)(S,{redeemOk:p})}),h&&Object(j.jsx)(I,{productInfo:w,redeemProduct:function(e,t,c){var n=function(e,t){var c=JSON.stringify({productId:e});console.log(c);var n={method:"POST",headers:O,body:c,redirect:"follow"};fetch("".concat(u,"/redeem"),n).then((function(e){return e.json()})).then((function(e){return!0})).catch((function(e){return console.log(e),!1}))}(e),r=c-t;s(Object(b.a)(Object(b.a)({},a),{},{points:r})),N(n)},redeemOk:p,setOpenModal:C,userCoins:r}),Object(j.jsx)(M,{productInfo:w})]})};var T=function(e){for(var t=e.productsPerPage,c=e.totalProducts,n=e.paginate,a=[],s=1;s<=Math.ceil(c/t);s++)a.push(s);return Object(j.jsx)("div",{children:Object(j.jsx)("nav",{className:"d-flex justify-content-center justify-content-md-end",children:Object(j.jsx)("ul",{className:"pagination",children:a.map((function(e){return Object(j.jsx)("li",{className:"page-item",children:Object(j.jsx)("a",{onClick:function(){return n(e)},href:"#",className:"page-link",children:e})},e)}))})})})},A=Object(n.createContext)();function R(e){var t=e.children,c=Object(n.useState)([]),a=Object(i.a)(c,2),s=a[0],r=a[1];return Object(n.useEffect)((function(){!function(e){var t={method:"GET",headers:O,redirect:"follow"};fetch("".concat(u,"/products"),t).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){return console.log(e)}))}(r)}),[]),Object(j.jsx)(A.Provider,{value:[s],children:t})}var J=function(){var e=Object(n.useContext)(A),t=Object(i.a)(e,1)[0],c=Object(n.useState)(1),a=Object(i.a)(c,2),s=a[0],r=a[1],l=Object(n.useState)(12),o=Object(i.a)(l,1)[0],d=Object(n.useContext)(y),b=Object(i.a)(d,1)[0],u=Object(n.useState)([]),O=Object(i.a)(u,2),h=O[0],m=O[1],x=s*o,f=x-o,v=h.slice(f,x);function p(e,t){return"lowest"===b.price?e.cost-t.cost:"highest"===b.price?t.cost-e.cost:0}return Object(n.useEffect)((function(){!function(){var e=Object(N.a)(t);m(e.sort(p))}()}),[t,b]),Object(j.jsxs)("section",{className:"container",children:[Object(j.jsxs)("div",{className:"container d-flex row justify-content-md-between justify-content-center mt-4",children:[Object(j.jsx)("div",{className:"d-none d-lg-block mt-2",children:Object(j.jsx)("h5",{children:"SORT BY | "})}),Object(j.jsx)(C,{}),Object(j.jsx)(T,{productsPerPage:o,totalProducts:t.length,paginate:function(e){r(e)}})]}),Object(j.jsx)("div",{className:"justify-content-center my-3 row",children:v.map((function(e){return Object(j.jsx)(E,{product:e},e._id)}))}),Object(j.jsxs)("h6",{className:"text-right text-secondary",children:["Page: ",Object(j.jsx)("strong",{children:s})]})]})};var U=function(){var e=Object(n.useState)(20),t=Object(i.a)(e,1)[0],c=Object(n.useState)(1),a=Object(i.a)(c,2),s=a[0],r=a[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),d=o[0],b=o[1],h=s*t,m=h-t,x=d.slice(m,h);return Object(n.useEffect)((function(){!function(e){var t={method:"GET",headers:O,redirect:"follow"};fetch("".concat(u,"/user/history"),t).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return console.log(e)}))}(b)}),[]),Object(j.jsxs)("section",{className:"container",children:[Object(j.jsxs)("div",{className:"container row d-flex justify-content-center justify-content-md-between mt-4",children:[Object(j.jsx)("div",{className:"flex-fill d-none d-lg-block mt-2",children:Object(j.jsx)("h5",{children:"HISTORY |"})}),Object(j.jsx)(T,{productsPerPage:t,totalProducts:d.length,paginate:function(e){r(e)}})]}),Object(j.jsxs)("div",{className:"container d-flex justify-content-center list-group my-3",children:[Object(j.jsx)("ul",{children:x.map((function(e){return Object(j.jsx)("li",{className:"list-group-item",children:e.name},e.createDate)}))}),Object(j.jsxs)("h6",{className:"text-right text-secondary",children:["Page: ",s]})]})]})},Y=c(3);var B=function(){return Object(j.jsx)("main",{children:Object(j.jsxs)(Y.c,{children:[Object(j.jsx)(Y.a,{exact:!0,path:"/RewardsStore-Acamica",children:Object(j.jsx)(R,{children:Object(j.jsx)(k,{children:Object(j.jsx)(J,{})})})}),Object(j.jsx)(Y.a,{path:"/RewardsStore-Acamica/history",children:Object(j.jsx)(U,{})})]})})};var H=function(){return Object(j.jsx)(o.a,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(x,{children:Object(j.jsx)(f,{})}),Object(j.jsx)(p,{}),Object(j.jsx)(x,{children:Object(j.jsx)(B,{})})]})})};r.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(H,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.8435ae94.chunk.js.map