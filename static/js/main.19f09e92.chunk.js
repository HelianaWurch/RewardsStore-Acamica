(this["webpackJsonprewards-store"]=this["webpackJsonprewards-store"]||[]).push([[0],{72:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),a=c(19),s=c.n(a),i=(c(60),c(7)),j=c.p+"static/media/coin.1fc21bda.svg",o=c(29),l=c(81),d=c(75),b=c(77),u=c(74),O=c(82),h=c(79),x=c(1);var f=function(e){var t=e.show,c=e.onHide,n=e.title,r=e.content;return Object(x.jsxs)(h.a,{show:t,onHide:c,children:[Object(x.jsx)(h.a.Header,{closeButton:!0,children:Object(x.jsx)(h.a.Title,{children:n})}),Object(x.jsx)(h.a.Body,{children:r}),Object(x.jsx)(h.a.Footer,{children:Object(x.jsx)(u.a,{variant:"secondary",onClick:c,children:"Close"})})]})},m=c(2),p="https://coding-challenge-api.aerolab.co",v=new Headers;v.append("Authorization","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGZjYzFhZDY3Mjk2ZTAwMTk5NjQxNDciLCJpYXQiOjE2MjcxNzczODl9.sTKwPPE9L3wOLCj5iKqBePgLCSbtqhUcHP7JZNdN7h4"),v.append("Content-Type","application/json");var g=Object(n.createContext)();function y(e){var t=e.children,c=Object(n.useState)({name:"",points:0}),r=Object(i.a)(c,2),a=r[0],s=r[1];return Object(n.useEffect)((function(){!function(e){var t={method:"GET",headers:v,redirect:"follow"};fetch("".concat(p,"/user/me"),t).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){return console.error(e)}))}(s)}),[]),Object(x.jsx)(g.Provider,{value:[a,s],children:t})}var N=c(76),w=c(53);var C=function(){var e=Object(n.useContext)(g),t=Object(i.a)(e,2),c=t[0],r=t[1];function a(e){!function(e,t,c){var n=JSON.stringify({amount:e}),r={method:"POST",headers:v,body:n,redirect:"follow"};fetch("".concat(p,"/user/points"),r).then((function(e){return e.json()})).then((function(e){var n=e,r=Object(m.a)({},t);r.points=n["New Points"],c(r)})).catch((function(e){return console.error(e)}))}(e,c,r)}return Object(x.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(x.jsxs)(N.a,{children:[Object(x.jsx)(w.a,{children:Object(x.jsxs)(u.a,{variant:"outline-info",onClick:function(){return a(1e3)},children:["1000 ",Object(x.jsx)("img",{className:"ml-2 mt-1",src:j,alt:"coin"})]})}),Object(x.jsx)(w.a,{children:Object(x.jsxs)(u.a,{variant:"outline-info",onClick:function(){return a(5e3)},children:["5000 ",Object(x.jsx)("img",{className:"ml-2 mt-1",src:j,alt:"coin"})]})}),Object(x.jsx)(w.a,{children:Object(x.jsxs)(u.a,{variant:"outline-info",onClick:function(){return a(7500)},children:["7500 ",Object(x.jsx)("img",{className:"ml-2 mt-1",src:j,alt:"coin"})]})})]})})};var S=function(){var e=Object(n.useContext)(g),t=Object(i.a)(e,1)[0],c=Object(n.useState)(!1),r=Object(i.a)(c,2),a=r[0],s=r[1],h=function(){return s(!0)};return Object(x.jsxs)(l.a,{fixed:"top",bg:"dark",variant:"dark",expand:"lg",children:[Object(x.jsx)(f,{show:a,onHide:function(){return s(!1)},title:"Buy More Coins...",content:Object(x.jsx)(C,{})}),Object(x.jsxs)(d.a,{children:[Object(x.jsx)(l.a.Brand,{href:"/RewardsStore-Acamica/",children:t.name}),Object(x.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(b.a,{bg:"light",children:[Object(x.jsx)(u.a,{variant:"light",onClick:h,children:t.points}),Object(x.jsx)("img",{className:"ml-2",src:j,alt:"coin"})]}),Object(x.jsx)(l.a.Collapse,{id:"basic-navbar-nav",children:Object(x.jsx)(d.a,{children:Object(x.jsxs)(O.a,{className:"me-auto text-center justify-content-end",children:[Object(x.jsx)(O.a.Link,{as:o.b,to:"/RewardsStore-Acamica/",children:"Home"}),Object(x.jsx)(O.a.Link,{as:o.b,to:"/RewardsStore-Acamica/history",children:"History"}),Object(x.jsx)(O.a.Link,{variant:"dark",onClick:h,children:"Buy Coins"})]})})})]})]})},k=c.p+"static/media/header-x1.b6f067c6.png",P=c(78);var I=function(){return Object(x.jsxs)("header",{children:[Object(x.jsx)("h1",{className:"d-none d-lg-block text-white",style:{position:"absolute",top:"16rem",left:"15rem",fontSize:"3.5rem"},children:"Rewards Store"}),Object(x.jsx)(P.a,{src:k,fluid:!0})]})},T=c(55),E=c(9),R=Object(n.createContext)();function B(e){var t=e.children,c=Object(n.useState)({price:"all-products"}),r=Object(i.a)(c,2),a=r[0],s=r[1];return Object(x.jsx)(R.Provider,{value:[a,s],children:t})}var M=c(80);var H=function(){var e=Object(n.useContext)(R),t=Object(i.a)(e,2),c=t[0],r=t[1];return Object(x.jsxs)(M.a,{onChange:function(e){var t=e.target,n=t.name,a=t.value,s=Object(m.a)(Object(m.a)({},c),{},Object(E.a)({},n,a));r(s)},children:[Object(x.jsx)(M.a.Check,{inline:!0,label:"All",name:"price",type:"radio",id:"all-products",value:"all-products"}),Object(x.jsx)(M.a.Check,{inline:!0,label:"Lowest Price",name:"price",type:"radio",id:"lowest",value:"lowest"}),Object(x.jsx)(M.a.Check,{inline:!0,label:"Highest Price",name:"price",type:"radio",id:"highest",value:"highest"})]})};var A=function(e){var t=e.redeemOk;return Object(x.jsx)(d.a,{className:"d-flex justify-content-center",children:!0===!t?Object(x.jsx)("h4",{children:"SUCCESS!"}):Object(x.jsx)("h4",{children:"Error! Something happened! Try Again!"})})},J=c(83),L=c.p+"static/media/buy-blue.13783e2a.svg",U=c.p+"static/media/buy-white.3eddcc1e.svg",z=function(e){var t=e.productInfo,c=e.setOpenModal,n=e.userInfo,r=e.setUserInfo,a=e.setRedeemOk;return Object(x.jsx)(J.a.Body,{style:{width:"100%",opacity:"90%",position:"absolute",left:0,top:0,bottom:0,backgroundColor:"#0ad4fa"},children:n.points>=t.price?Object(x.jsxs)(d.a,{className:"py-5",children:[Object(x.jsxs)(N.a,{children:[Object(x.jsxs)(w.a,{style:{width:"25%",opacity:"90%",position:"absolute",top:5,right:-10},children:[" ",Object(x.jsx)("img",{src:U,alt:"icon-bag"})]}),Object(x.jsx)(w.a,{className:"d-flex justify-content-center",children:Object(x.jsxs)(J.a.Title,{children:[t.price,""," ",Object(x.jsx)("img",{src:j,alt:"coins"})]})})]}),Object(x.jsx)(N.a,{children:Object(x.jsx)(u.a,{variant:"secondary",onClick:function(){var e=function(e){var t=JSON.stringify({productId:e}),c={method:"POST",headers:v,body:t,redirect:"follow"};fetch("".concat(p,"/redeem"),c).then((function(e){return!0})).catch((function(e){return console.error(e),!1}))}(t.id),s=n.points-t.price;r(Object(m.a)(Object(m.a)({},n),{},{points:s})),a(e),c(!0)},children:"Redeem now"})})," "]}):Object(x.jsx)(d.a,{className:"py-5 ",children:Object(x.jsx)(N.a,{children:Object(x.jsx)(w.a,{className:"d-flex justify-content-center",children:Object(x.jsxs)(J.a.Title,{children:["You Need: ","",Math.abs(n.points-t.price)," ","",Object(x.jsx)("img",{src:j,alt:"coins"})]})})})})})};var Y=function(e){var t=Object(n.useContext)(g),c=Object(i.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),j=Object(i.a)(s,2),o=j[0],l=j[1],d=Object(n.useState)(!1),b=Object(i.a)(d,2),u=b[0],O=b[1],h=Object(n.useState)(!1),m=Object(i.a)(h,2),p=m[0],v=m[1],y={id:e.product._id,name:e.product.name,imgUrl:e.product.img.url,price:e.product.cost,category:e.product.category};return Object(x.jsxs)(J.a,{style:{width:"18rem",cursor:"pointer"},onMouseEnter:function(){l(!0)},onMouseLeave:function(){l(!1)},children:[o&&Object(x.jsx)(z,{productInfo:y,setOpenModal:function(){return v(!0)},userInfo:r,setUserInfo:a,setRedeemOk:O}),Object(x.jsx)(J.a.Img,{variant:"top",src:y.imgUrl}),Object(x.jsxs)(J.a.Body,{children:[!o&&Object(x.jsxs)(w.a,{style:{width:"25%",opacity:"90%",position:"absolute",top:5,right:-25},children:[" ",Object(x.jsx)("img",{src:L,alt:"icon-bag"})]}),Object(x.jsx)(J.a.Text,{style:{marginBottom:"-0.1rem"},children:y.category}),Object(x.jsx)(J.a.Title,{children:y.name})]}),p&&Object(x.jsx)(f,{show:p,onHide:function(){return v(!1)},title:"Redeem Product",content:Object(x.jsx)(A,{redeemOk:u})})]})},G=c(84);var D=function(e){for(var t=e.productsPerPage,c=e.totalProducts,n=e.paginate,r=[],a=function(e){r.push(Object(x.jsx)(G.a.Item,{onClick:function(){n(e)},children:e},e))},s=1;s<=Math.ceil(c/t);s++)a(s);return Object(x.jsx)(d.a,{className:"d-flex justify-content-center justify-content-md-end",children:Object(x.jsx)(G.a,{children:r})})},Z=Object(n.createContext)();function Q(e){var t=e.children,c=Object(n.useState)([]),r=Object(i.a)(c,2),a=r[0],s=r[1];return Object(n.useEffect)((function(){!function(e){var t={method:"GET",headers:v,redirect:"follow"};fetch("".concat(p,"/products"),t).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){return console.error(e)}))}(s)}),[]),Object(x.jsx)(Z.Provider,{value:[a],children:t})}var W=function(){var e=Object(n.useContext)(Z),t=Object(i.a)(e,1)[0],c=Object(n.useState)(1),r=Object(i.a)(c,2),a=r[0],s=r[1],j=Object(n.useState)(12),o=Object(i.a)(j,1)[0],l=Object(n.useContext)(R),b=Object(i.a)(l,1)[0],u=Object(n.useState)([]),O=Object(i.a)(u,2),h=O[0],f=O[1],m=a*o,p=m-o,v=h.slice(p,m);function g(e,t){return"lowest"===b.price?e.cost-t.cost:"highest"===b.price?t.cost-e.cost:0}return Object(n.useEffect)((function(){!function(){var e=Object(T.a)(t);f(e.sort(g))}()}),[t,b]),Object(x.jsxs)(d.a,{className:"mt-4 ",children:[Object(x.jsxs)(N.a,{className:"text-center",children:[Object(x.jsx)(w.a,{xs:!0,lg:"2",sm:12,md:3,children:Object(x.jsx)(d.a,{className:"d-flex justify-content-center justify-content-md-start",children:Object(x.jsx)("h5",{children:"SORT BY | "})})}),Object(x.jsx)(w.a,{sm:12,md:6,children:Object(x.jsx)(H,{})}),Object(x.jsx)(w.a,{sm:12,md:3,lg:4,children:Object(x.jsx)(D,{productsPerPage:o,totalProducts:t.length,paginate:function(e){s(e)}})})]}),Object(x.jsx)(d.a,{children:Object(x.jsx)(N.a,{children:v.map((function(e){return Object(x.jsx)(w.a,{className:"mb-4 d-flex justify-content-center",children:Object(x.jsx)(Y,{product:e})},e._id)}))})}),Object(x.jsx)(d.a,{className:"text-end",children:Object(x.jsxs)("p",{className:"text-secondary mt-2",style:{fontWeight:700},children:["Page: ",a]})})]})},q=c(85);var F=function(){var e=Object(n.useState)(25),t=Object(i.a)(e,1)[0],c=Object(n.useState)(1),r=Object(i.a)(c,2),a=r[0],s=r[1],j=Object(n.useState)([]),o=Object(i.a)(j,2),l=o[0],b=o[1],u=a*t,O=u-t,h=l.slice(O,u);return Object(n.useEffect)((function(){!function(e){var t={method:"GET",headers:v,redirect:"follow"};fetch("".concat(p,"/user/history"),t).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return console.error(e)}))}(b)}),[]),Object(x.jsxs)(d.a,{className:"mt-4 ",children:[Object(x.jsxs)(N.a,{className:"text-center",children:[Object(x.jsx)(w.a,{sm:12,md:6,lg:6,children:Object(x.jsx)(d.a,{className:"d-flex justify-content-center justify-content-md-start",children:Object(x.jsx)("h5",{children:"HISTORY | "})})}),Object(x.jsx)(w.a,{sm:12,md:6,lg:6,children:Object(x.jsx)(D,{productsPerPage:t,totalProducts:l.length,paginate:function(e){s(e)}})})]}),Object(x.jsxs)(d.a,{children:[Object(x.jsx)(N.a,{children:Object(x.jsx)(q.a,{children:h.map((function(e){return Object(x.jsx)(q.a.Item,{children:Object(x.jsxs)(N.a,{children:[Object(x.jsx)(w.a,{xs:!0,lg:"10",children:e.name}),Object(x.jsxs)(w.a,{className:"text-end",children:["$",e.cost]})]})},e.createDate)}))})}),Object(x.jsx)(d.a,{className:"text-end",children:Object(x.jsxs)("p",{className:"text-secondary mt-2",style:{fontWeight:700},children:["Page: ",a]})})]})]})},K=c(10);var X=function(){return Object(x.jsx)("main",{children:Object(x.jsxs)(K.c,{children:[Object(x.jsx)(K.a,{exact:!0,path:"/RewardsStore-Acamica/",children:Object(x.jsx)(Q,{children:Object(x.jsx)(B,{children:Object(x.jsx)(W,{})})})}),Object(x.jsx)(K.a,{path:"/RewardsStore-Acamica/",children:Object(x.jsx)(F,{})})]})})};var _=function(){return Object(x.jsx)(o.a,{children:Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(y,{children:[Object(x.jsx)(S,{}),Object(x.jsx)(I,{}),Object(x.jsx)(X,{})]})})})};s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(_,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.19f09e92.chunk.js.map